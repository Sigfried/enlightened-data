<!DOCTYPE html>
<html>
    <head>
        <script src="./lib/underscore.js"></script>
        <script src="./lib/underscoreAddon.js"></script>
        <script src="./lib/underscore-unchained.js"></script>
        <script src="./lib/jquery-1.9.1.js"></script>
        <script src="../supergroup.js"></script>
    </head>
    <body>
        <script>
            $(function() {
                var gradeBook = [
                    {firstName: 'Sigfried', lastName: 'Gold', class: 'Remedial Programming', grade: 'C+', num: 2.2},
                    {firstName: 'Sigfried', lastName: 'Gold', class: 'Literary Posturing', grade: 'B', num: 3},
                    {firstName: 'Sigfried', lastName: 'Gold', class: 'Documenting with Pretty Colors', grade: 'B-', num: 2.7},
                    {firstName: 'Someone', lastName: 'Else', class: 'Remedial Programming', grade: 'A'}];

                $('body').append('<h3>gradeBook: </h3><pre>' + JSON.stringify(gradeBook,null,4) + '</pre>');

                var gradesByLastName = _.supergroup(gradeBook, 'lastName')

                $('body').append("<h3>gradesByLastName = _.supergroup(gradeBook, 'lastName'): </h3><pre>" + JSON.stringify(gradesByLastName) + '</pre>');
                $('body').append("<h3>gradesByLastName.lookup('Else').records: </h3><pre>" + JSON.stringify(gradesByLastName.lookup('Else').records,null,2) + '</pre>');

                var gradesByName = _.supergroup(gradeBook,  
                        function(d) { return d.lastName + ', ' + d.firstName },  
                        {dimName: 'fullName'})

                var sigfried = gradesByName.lookup('Gold, Sigfried');
                sigfried.records.length; // 3
                var sigfriedGPA = sigfried.records.reduce(function(result,rec) { return result+rec.num }, 0) / sigfried.records.length;
            });
        </script>
    </body>
</html>

